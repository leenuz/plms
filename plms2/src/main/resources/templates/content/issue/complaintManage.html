<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/default_layout}">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="stylesheet" as="style" crossorigin
	href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />

<link th:href="@{/css/common.css}" rel="stylesheet" />

<link rel="stylesheet" href="/css/issue/complaintManage.css" />
<link rel="stylesheet" href="/css/issue/complaintRespond.css" />



<!-- <script type="text/javascript" src="https://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
		<link rel="stylesheet" type="text/css" href="//code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css"> -->
<style>
div.dt-top-container {
	display: grid;
	grid-template-columns: auto auto auto;
}

div.dt-center-in-div {
	margin: 0 auto;
	float: right;
	margin-right: 30px;
}

div.dt-center-in-div>div {
	display: inline;
}

div.dt-filter-spacer {
	margin: 10px 0;
	border: 1px solid red;
}

.dt-title {
	text-align: center;
	width: 180px;
	float: left;
}

.dt-buttons {
	display: inline-block;
	width: 180px;
}

.dt-length {
	display: inline-block;
}

.dt-button {
	color: white;
	background-color: #4e5871;
	font-size: 15px;
	font-weight: 600;
	border-radius: 10px;
	background-image: url(/assets/media/menu01/download.png);
	background-size: 11px;
	background-repeat: no-repeat;
	background-position: 123px center;
	text-aline: left;
	margin-right: 10px;
	width: 159px;
	height: 38px;
}

.dt-paging {
	text-align: center;
}

.dt-paging-button {
	box-sizing: border-box;
	display: inline-block;
	min-width: 1.5em;
	padding: 0.5em 1em;
	margin-left: 2px;
	text-align: center;
	text-decoration: none !important;
	cursor: pointer;
	border: 1px solid transparent;
	border-radius: 2px;
	background: transparent;
	color: #007bff !important;
	font-size: 15px;
	font-weight: 600;
}

.bottom {
	text-align: center;
}

.top {
	text-align: right;
	margin: 10px;
}
</style>

<title>민원관리</title>
</head>
<th:block layout:fragment="content">

	<!-- 민원관리 -->
	<div class="complaintManageWrappers">
		<div class="complaintManageHeader"></div>
		<main id="complaintManage">
			<div class="mainTitle">
				<h1>민원관리</h1>
			</div>

			<div class="sectionBox contentScr">
				<section class="toolPlace">
					<div class="selectPlace">
						<div class="selectContentArea">
							<div class="hiddenSelectBox">
								<!-- id명, name명 변경 -->
								<select name="complaintManageSelectBox01" id="complaintManageSelectBox01" hidden>
									<option value="">민원발생보고</option>
									<option value="">민원대응방안수립보고</option>
									<option value="">민원완료보고</option>
								</select>
							</div>
							<section class="customSelectBox">
								<button class="customSelectView">문서선택</button>

								<ul class="customSelectBtns"></ul>
							</section>
						</div>
					</div>
					<button class="toolBtn viewBtn">문서보기</button>
					<button class="toolBtn completeBtn complainFinBtn">민원완료</button>
				</section>
				<section class="codeManagement">
					<div class="subTitle">
						<div class="subTitleText">민원 현황 상세</div>
					</div>

					<div class="contWrap">
						<div class="depth1">
							<ul class="rowListBox">
								<li class="title">민원 명</li>
								<li class="content">
									<input type="text" class="notWriteInput com_name" id="mwdetail_title" placeholder="" readonly />
								</li>
							</ul>
							<ul class="rowListBox">
								<li class="title">발생일자</li>
								<li class="content">
									<input type="text" class="notWriteInput occ_date" id="mwdetail_date" placeholder="" readonly />
								</li>
							</ul>
							<ul class="rowListBox">
								<li class="title">발생지사</li>
								<li class="content">
									<input type="text" class="notWriteInput jisa" id="mwdetail_jisa" placeholder="" readonly />
								</li>
							</ul>
							<ul class="rowListBox">
								<li class="title">이슈 유형</li>
								<li class="content">
									<input type="text" class="notWriteInput issue_type" id="mwdetail_issuetype" placeholder="" readonly />
								</li>
							</ul>
							<ul class="rowListBox">
								<li class="title">진행 현황</li>
								<li class="content">
									<input type="text" class="notWriteInput prog_status" id="mwdetail_prog_status" placeholder="" readonly />
								</li>
							</ul>
						</div>
						<div class="depth2">
							<div class="titleBox">
								<ul class="titles leftTitle">
									<li class="title divisionWidth">구분</li>
								</ul>
								<ul class="titles rightTitle">
									<li class="title smallWidth">순번</li>
									<li class="title smallWidth">성명</li>
									<li class="title">생년월일</li>
									<li class="title largeWidth">토지주와의 관계</li>
									<li class="title largeWidth">연락처</li>
									<li class="title">현장입회</li>
								</ul>
							</div>
							<div class="contentsWrap">
								<ul class="titles">
									<li class="title leftTitle">민원인/토지주</li>
								</ul>
								<div class="contentsBox" id="minwonin_tojiju_body">
								</div>
							</div>
						</div>
						<div class="depth3">
							<ul class="rowListBox">
								<li class="title">토지이력</li>
								<li class="content">
									<textarea readonly class="notWriteInput land_history" id="toji_history"></textarea>
								</li>
							</ul>
							<ul class="rowListBox">
								<li class="title">요구사항</li>
								<li class="content">
									<textarea readonly class="notWriteInput requirements" id="minwon_requirement"></textarea>
								</li>
							</ul>
							<ul class="rowListBox">
								<li class="title">내용</li>
								<li class="content">
									<textarea readonly class="notWriteInput land_contents"></textarea>
								</li>
							</ul>
						</div>
					</div>
				</section>

				<!-- 민원토지 -->
				<section class="complaintLand">
					<div class="subTitle">
						<div class="subTitleText">민원 토지</div>
					</div>

					<div class="contWrap">
						<div class="depth1">
							<ul class="titles">
								<li class="title">대표토지여부</li>
								<li class="title largeWidth">주소</li>
								<li class="title">등기 여부</li>
								<li class="title">계약 여부</li>
							</ul>
							<ul class="contents">
								<li class="content">
									<input type="text" readonly placeholder="" class="notWriteInput" />
								</li>
								<li class="content largeWidth">
									<input type="text" readonly placeholder="" class="notWriteInput" />
								</li>
								<li class="content">
									<input type="text" readonly placeholder="" class="notWriteInput" />
								</li>
								<li class="content">
									<input type="text" readonly placeholder="" class="notWriteInput" />
								</li>
							</ul>
						</div>
					</div>
				</section>

				<!-- 첨부파일 -->
				<section class="attachFileInfo">
					<div class="subTitle">
						<div class="subTitleText">첨부파일</div>
					</div>

					<div class="contWrap">
						<div class="depth1">
							<ul class="titles titleScr">
								<li class="title">날짜</li>
								<li class="title fileNameWidth">파일명</li>
								<li class="title">다운로드</li>
							</ul>
							<ul class="contents">
								<li class="content">
									<input type="text" placeholder="" readonly class="notWriteInput" /></li>
								<li class="content fileNameWidth">
									<input type="text" placeholder="" readonly class="notWriteInput" /></li>
								<li class="content btnsWrap">
									<button class="fileDownloadBtn">다운로드<span class="downloadIcon"></span></button>
								</li>
							</ul>
						</div>
					</div>
				</section>
				<!-- 협의내용 -->
				<section class="consultDetails">
					<div class="subTitle">
						<div class="subTitleText">협의 내용</div>
					</div>

					<div class="contWrap">
						<div class="depth1">
							<ul class="titles titleScr">
								<li class="title">일시</li>
								<li class="title smallWidth">진행 현황</li>
								<li class="title fileNameWidth">파일명</li>
								<li class="title">ECHO 문서보기</li>
							</ul>
						</div>
					</div>
				</section>
			</div>

			<div class="finalBtnBox btnWrap">
				<button class="backBtn" onclick="history.back();">이전</button>
				<button class="addBtn addComplainBtn">협의 추가</button>
			</div>
		</main>
	</div>
	<div class="complainManageaddComplainWrapper"></div>
	<div class="complainManageComplainFinishWrapper"></div>
	
	<!-- 민원 대응방안 수립[S] -->	
	<div id="complainRespondContentBoxs">
        <div class="complainRespondPopWrap">
            <div class="complainRespondPopContent">
                <div class="complainRespondPopTitles">
                    <h5>민원 대응방안 수립</h5>
                    <button class="complainRespondcloseBtn">
                        <img src="/complaintResponMedia/closeBtn.png" alt="close" />
                    </button>
                </div>
                <div class="complainRespondBoxs">
                    <div class="complainRespondDatas">
                        <ul class="complainRespondDataCont">
                            <li class="complainRespondDataTitle">
                                <p>민원명</p>
                            </li>
                            <li class="complainRespondNameBox"><input type="text" readonly value="지상권 미설정 토지 송유관이설 요구" /></li>
                        </ul>
                        <ul class="complainRespondDataCont">
                            <li class="complainRespondDataTitle">
                                <p>권리확보</p>
                            </li>
                            <li>
                                <div class="complainRespondRadioBoxs">
                                    <input type="radio" name="complainRespondRights" value="지상권설정" /><span>지상권설정</span>
                                    <input type="radio" name="complainRespondRights" value="지상권미설정" /><span>지상권미설정</span>
                                    <input type="radio" name="complainRespondRights" value="점용" /><span>점용</span>
                                    <input type="radio" name="complainRespondRights" value="미점용" /><span>미점용</span>
                                </div>
                            </li>
                        </ul>
                        <ul class="complainRespondDataCont">
                            <li class="complainRespondDataTitle">
                                <p>계약여부</p>
                            </li>
                            <li>
                                <div class="complainRespondRadioBoxs">
                                    <input type="radio" name="complainRespondContract" value="계약체결"><span>계약체결</span>
                                    <input type="radio" name="complainRespondContract" value="계약미체결"><span>계약미체결</span>
                                </div>
                            </li>
                        </ul>
                        <ul class="complainRespondDataCont">
                            <li class="complainRespondDataTitle">
                                <p>이슈유형</p>
                            </li>
                            <li class="complainRespondDataSelectWrapper">
                                <div class="complainRespondSelectBoxs">
                                    <ul class="complainRespondSelectContent">
                                        <!--수정부분 지사-->
                                        <div class="selectWrappers">
                                            <select name="" class="complainRespondHiddenSelect" id="complainRespondHiddenSelectBox01" multiple="multiple" hidden>
                                                <option value="대분류">대분류</option>
                                                <option value="이슈없음">이슈없음</option>
                                                <option value="추가보상 요구">추가보상 요구</option>
                                                <option value="지상권설정 오류">지상권설정 오류</option>
                                            </select>
                                        </div>
                                        <!--보여지는 셀렉박스-->
                                        <div class="surfaceSelects">
                                            <button class="complainRespondSelectTitleBtn"></button>
                                            <div class="sufaceSelectList">
                                                <ul class="surfaceSelectListMember"></ul>
                                            </div>
                                        </div>
                                    </ul>
                                    <ul class="complainRespondSelectContent">
                                        <!--수정부분 지사-->
                                        <div class="selectWrappers">
                                            <select name="" class="complainRespondHiddenSelect" id="complainRespondHiddenSelectBox02" multiple="multiple" hidden>
                                                <option value="중분류">중분류</option>
                                                <option value="중분류1">중분류1</option>
                                                <option value="중분류2">중분류2</option>
                                                <option value="중분류3">중분류3</option>
                                            </select>
                                        </div>
                                        <!--보여지는 셀렉박스-->
                                        <div class="surfaceSelects">
                                            <button class="complainRespondSelectTitleBtn"></button>
                                            <div class="sufaceSelectList">
                                                <ul class="surfaceSelectListMember"></ul>
                                            </div>
                                        </div>
                                    </ul>
                                    <ul class="complainRespondSelectContent">
                                        <!--수정부분 지사-->
                                        <div class="selectWrappers">
                                            <select name="" class="complainRespondHiddenSelect" id="complainRespondHiddenSelectBox03" multiple="multiple" hidden>
                                                <option value="소분류">소분류</option>
                                                <option value="소분류1">소분류1</option>
                                                <option value="소분류2">소분류2</option>
                                                <option value="소분류3">소분류3</option>
                                            </select>
                                        </div>
                                        <!--보여지는 셀렉박스-->
                                        <div class="surfaceSelects">
                                            <button class="complainRespondSelectTitleBtn"></button>
                                            <div class="sufaceSelectList">
                                                <ul class="surfaceSelectListMember"></ul>
                                            </div>
                                        </div>
                                    </ul>
                                </div>
                            </li>
                        </ul>
                        <ul class="complainRespondDataCont">
                            <li class="complainRespondDataTitle complainRespondTextareaTitle">
                                <p>민원내용</p>
                            </li>
                            <li class="complainRespondDataTextWrap">
                                <div class="complainRespondTextBoxs">
                                    <textarea placeholder="민원내용 입력칸입니다."></textarea>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="complainRespondBtnBoxs">
                    <button class="complainRespondDelete closeEvetBtn">삭제</button>
                    <button class="complainRespondSave closeEvetBtn">저장</button>
                    <button class="complainRespondReport closeEvetBtn">상신</button>
                    <button class="complainRespondClose closeEvetBtn">닫기</button>
                </div>
            </div>

        </div>
    </div>
    <script>
    /* x표시 클릭시 닫기 */

    const complainRespondcloseBtn = document.querySelector(".complainRespondcloseBtn");
    const complainRespondContentBoxWrapper = document.getElementById("complainRespondContentBoxs");

    if (complainRespondcloseBtn) {
        complainRespondcloseBtn.addEventListener("click", () => {
            complainRespondContentBoxWrapper.classList.remove("active");
        })
    }

    /* 삭제,저장,상신,닫기 버튼 클릭시 팝업창 닫히기 */
    const closeEvetBtns = document.querySelectorAll("#complainRespondContentBoxs .closeEvetBtn");

    if (closeEvetBtns) {
        closeEvetBtns.forEach((btns) => {
            btns.addEventListener("click", () => {
                complainRespondContentBoxWrapper.classList.remove("active");
            })
        })
    }



    /* 셀렉트박스 함수 */

    const complainRespondSelectEvet = () => {

        const complainRespondSelectsTitleBtn = document.querySelectorAll(".complainRespondPopWrap .complainRespondSelectTitleBtn");
        const complainRespondSelectList = document.querySelectorAll(".complainRespondPopWrap .sufaceSelectList");
        const complainRespondSelectListMember = document.querySelectorAll(".complainRespondPopWrap .sufaceSelectList .surfaceSelectListMember");
        const complainRespondselectWrappers = document.querySelectorAll(".complainRespondHiddenSelect"); //셀렉박스


        let complainRespondAnswer = "";

        //셀렉버튼 최초값 함수
        const complainRespondInitialValues = () => {
            if (complainRespondselectWrappers.length > 0) {

                for (let d = 0; d <= complainRespondselectWrappers.length - 1; d++) {

                    let complainRespondselectValuesInitial = complainRespondselectWrappers[d].children;

                    complainRespondSelectsTitleBtn[d].innerText = complainRespondselectValuesInitial[0].value;
                    complainRespondselectWrappers[d].value = complainRespondSelectsTitleBtn[d].innerText;

                }
            }
        }


        if (complainRespondselectWrappers.length > 0) {

            complainRespondInitialValues(); //최초의값

            //셀렉박스 값  li p값에 담기 
            for (let i = 0; i <= complainRespondselectWrappers.length - 1; i++) {

                const complainRespondSelectValues = complainRespondselectWrappers[i].children; //셀렉박스옵션값 

                for (let x = 0; x <= complainRespondSelectValues.length - 1; x++) {
                    complainRespondAnswer += `<li><p>${complainRespondSelectValues[x].value}</p></li>`;
                }

                complainRespondSelectListMember[i].innerHTML = complainRespondAnswer;
                complainRespondAnswer = '';
            }
        }


        complainRespondSelectsTitleBtn.forEach((btns, index) => {

            btns.addEventListener("click", () => {
                const complainRespondNextSiblings = btns.nextElementSibling;

                complainRespondSelectsTitleBtn.forEach((otherBtn) => {
                    if (otherBtn !== btns) {
                        otherBtn.classList.remove("active");
                    }
                });
                btns.classList.toggle("active");
                complainRespondNextSiblings.classList.toggle("active");

                //surfaceSelectList관련 toggle버튼
                complainRespondSelectList.forEach((box, boxIndex) => {
                    //셀렉버튼의 인덱스와 surfaceSelectList 인덱스번호가 일치하면 메뉴를 오픈하고, btn에 active를 포함
                    if (index === boxIndex) {

                        box.classList.toggle(
                            "active",
                            btns.classList.contains("active")
                        );
                    } else {
                        //그렇지 않으면 메뉴닫기
                        box.classList.remove("active");

                    }


                });

            });


            complainRespondSelectList.forEach((list) => {
                list.addEventListener("click", (event) => {

                    const complainRespondThisBtns = event.target.parentElement.parentElement.parentElement.previousElementSibling;
                    const complainRespondSelectContent = event.target.parentElement.parentElement.parentElement.parentElement.previousElementSibling.children[0]; //셀렉박스
                    let complainRespondCurrentSelect = complainRespondSelectContent.getAttribute("id"); //셀렉박스아이디 가져오기

                    if (event.target.nodeName === "P") {

                        let complainRespondCurrentSelectValue = document.getElementById(complainRespondCurrentSelect); //현재 셀렉박스 가져오기
                        return complainRespondThisBtns.innerText = event.target.innerText,
                            $(complainRespondCurrentSelectValue).val(event.target.innerText), //셀렉박스 값에 현재 클릭된 값의 텍스트 담기 
                            console.log(complainRespondCurrentSelectValue.value), //셀렉박스값표시
                            complainRespondSelectsTitleBtn.forEach((btn) => btn.classList.remove("active")),
                            complainRespondSelectList.forEach((lists) => lists.classList.remove("active"));

                    }

                });

            });


        })
    }

    complainRespondSelectEvet();
    
    </script>
	<!-- 민원 대응방안 수립[E] -->
	
	<!-- script -->
	<script type="module" src="/js/module/surfaceMain.js"></script>
	<script src="/components/js/menu06/complaintManage.js"></script>
	<script src="/js/common/common.js"></script>
	
	

</th:block>

</html>
