<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="commonSQL">

	
	<select id="selectAllJisaList" parameterType="java.util.HashMap" resultType="java.util.HashMap">
		<![CDATA[
		select * from jisa_master
		]]>
	</select>
	<select id="selectYongdoList" parameterType="java.util.HashMap" resultType="java.util.HashMap">
		<![CDATA[
		select * from jisan_yongdo
		]]>
	</select>
	<select id="selectPipeNameList" parameterType="java.util.HashMap" resultType="java.util.HashMap">
		<![CDATA[
		select * from jisa_zone_name where jzn_jisa=#{idx}
		]]>
	</select>
	<select id="selectJimokList" parameterType="java.util.HashMap" resultType="java.util.HashMap">
		<![CDATA[
		select * from jimok_master 
		]]>
	</select>
	<select id="selectAddressList" parameterType="java.util.HashMap" resultType="java.util.HashMap">
		<![CDATA[
		select * from jijuk_master_2022 where juso like concat('%',#{address},'%')
		]]>
	</select>
	<select id="selectLcodeList" parameterType="java.util.HashMap" resultType="java.util.HashMap">
		<![CDATA[
		select * from jijuk_master_2022 where bcode like concat(#{address},'%')
		]]>
	</select>
	<select id="getSidoMaster" parameterType="java.util.HashMap" resultType="java.util.HashMap">
		<![CDATA[
		select * from sido_master order by sm_name 
		]]>
	</select>
	<select id="getSigunMaster" parameterType="java.util.HashMap" resultType="java.util.HashMap">
		
		 select sm_gugun from sigun_master 
		 where 1=1
		 <if test="@org.apache.commons.lang3.ObjectUtils@isNotEmpty(key)" > 
		 and sm_sido=#{key} 
		 </if>
		
	</select>
	<select id="getDongMaster" parameterType="java.util.HashMap" resultType="java.util.HashMap">
		<![CDATA[
			SELECT bm_dong FROM bdong_master where bm_sido=#{sidoKey} AND bm_sigungu = #{gugunKey}
		]]>
	</select>
	<select id="getRiMaster" parameterType="java.util.HashMap" resultType="java.util.HashMap">
		<![CDATA[
			SELECT rm_ri FROM ri_master where rm_sido=#{sidoKey} AND rm_sigungu = #{gugunKey} AND rm_dong = #{dongKey}
		]]>
	</select>
	
	<insert id="pnuAtcUpload" parameterType="java.util.HashMap" useGeneratedKeys="true" keyColumn="pa_idx" keyProperty="pa_idx">
		
		INSERT INTO  pnu_atcfile
		(
		 pa_pnu
		,pa_file_nm
		,pa_file_path
		,pa_file_seq
		,pa_pmt_no
		,pa_manage_no
		
		 ) 
		 VALUES (
		 #{pnu}
		 ,#{filename}
		 ,#{filepath}
		 ,#{fileseq}
		 ,#{pmt_no}
		
		 ,#{manage_no}
		)
	
	</insert>

	<delete id="pnuAtcDelete" parameterType="java.util.HashMap">

		delete from pnu_atcfile
		where pa_idx = #{pa_idx}

	</delete>
	
	<insert id="putMemoData" parameterType="java.util.HashMap" useGeneratedKeys="true" keyColumn="mm_idx" keyProperty="mm_idx">
		
		INSERT INTO  memo_master
		(
		 mm_manage_no
		 ,mm_user_name
		 ,mm_memo
		 ,mm_wdate
		
		 ) 
		 VALUES (
		 #{manage_no}
		 ,#{wname}
		 ,#{wmemo}
		 ,Now()
		)
	
	</insert>
	<insert id="updateMemoData" parameterType="java.util.HashMap" useGeneratedKeys="true" keyColumn="mm_idx" keyProperty="mm_idx">
		
		update  memo_master set 
		
		
		 mm_user_name = #{wname}
		 ,mm_memo = #{wmemo}
		 ,mm_wdate = Now()
		
		where 1=1
		<if test="@org.apache.commons.lang3.ObjectUtils@isNotEmpty(idx)" >
		and  mm_idx=${idx}
		</if>
	
	</insert>
	
	<insert id="deleteMemoData" parameterType="java.util.HashMap" useGeneratedKeys="true" keyColumn="mm_idx" keyProperty="mm_idx">
		
		delete from  memo_master 
		where 1=1
		
		and  mm_idx=${idx}
		
	
	</insert>
	
	<select id="selectMemoList" parameterType="java.util.HashMap" resultType="java.util.HashMap">
		select *,(row_number() over()) as no 
		from memo_master 
		where 1=1
		<if test="@org.apache.commons.lang3.ObjectUtils@isNotEmpty(manage_no)" >
		and mm_manage_no=#{manage_no}
		</if>
			
	</select>
	
	
</mapper>